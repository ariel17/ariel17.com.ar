<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " vocab="http://ogp.me/ns" lang="es">
<head>
<meta charset="utf-8">
<base href="#">
<meta name="description" content="¿Qué dijo?">
<meta name="viewport" content="width=device-width">
<title>Ariel Gerardo Ríos (publicaciones antiguas, página 2) | Ariel Gerardo Ríos</title>
<link href="../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS (en)" href="../en/rss.xml">
<link rel="alternate" type="application/rss+xml" title="RSS (es)" href="../rss.xml">
<link rel="canonical" href="#">
<link rel="prev" href="index-3.html" type="text/html">
<link rel="next" href="index-1.html" type="text/html">
<!--[if lt IE 9]><script src="../assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Ir al contenido principal</a>
    <div id="container">
         
    <header id="header"><nav class="navbar navbar-inverse navbar-fixed-top"><div class="container-fluid">
      <div class="navbar-header">
        <button type="button" class="collapsed navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a href="#" class="navbar-brand">Ariel Gerardo Ríos</a>
      </div>
      <div class="collapse navbar-collapse" id="navbar-collapse">
        <ul class="nav navbar-nav navbar-right">
<li id="home-link"><a href="../">Home</a></li>
                <li class="active"><a href="#">Blog</a></li>
                <li><a href="../projects">Proyectos</a></li>
          
          
        </ul>
</div>
    </div>
  </nav></header><main id="content"><div class="postindex">
    <article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="clojure-brazil/" class="u-url">Clojure @ Brasil</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Ariel Gerardo Ríos</span></p>
            <p class="dateline"><a href="clojure-brazil/" rel="bookmark"><time class="published dt-published" datetime="2015-09-14T16:54:21-03:00" title="2015-09-14 16:54">2015-09-14 16:54</time></a></p>
                <p class="commentline">
        
    <a href="clojure-brazil/#disqus_thread" data-disqus-identifier="cache/posts/clojure-brazil.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<p>Desde el Lunes 24/8 al Miércoles 26/8 inclusive estuve en Brasil participando
de un taller de programación en el <a class="reference external" href="http://www.melia.com/en/hotels/brazil/campinas/tryp-sao-paulo-campinas-hotel/index.html?utm_medium=textlink&amp;utm_source=tripadvisor&amp;utm_campaign=businesslisting_ficha&amp;utm_content=6760">hotel Tryp de la ciudad de Campinas</a>.</p>
<img alt="https://pbs.twimg.com/media/CNYJpKBWUAESvwD.jpg:large" src="https://pbs.twimg.com/media/CNYJpKBWUAESvwD.jpg:large"><p>El evento fue organizado por <a class="reference external" href="https://www.movile.com/">Movile</a> como patrocinador y por el equipo <a class="reference external" href="http://lambdanext.eu/">Lambda Next</a>
como catedráticos. Fueron 3 días de 9 a 18 hs con un cronograma indefinido pero
responsivo a las dudas a medida que se presentaban las características básicas
del lenguaje.</p>
<div class="section" id="entorno-de-trabajo">
<h2>Entorno de trabajo</h2>
<p>Obviamente, <a class="reference external" href="http://www.vim.org/">ViM</a> :). Mi entorno lo preparé siguiendo este <a class="reference external" href="http://blog.venanti.us/clojure-vim/">excelente post</a> acerca de los
mejorcitos plugins. A saber:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/tpope/vim-fireplace">vim-fireplace</a></li>
<li><a class="reference external" href="https://github.com/tpope/vim-salve">vim-salve</a></li>
<li><a class="reference external" href="https://github.com/vim-scripts/paredit.vim">paredit.vim</a></li>
<li><a class="reference external" href="https://github.com/tpope/vim-surround">vim-sourround</a></li>
<li><a class="reference external" href="https://github.com/venantius/vim-eastwood">vim-eastwood</a></li>
<li><a class="reference external" href="https://github.com/venantius/vim-cljfmt">vim-cljfmt</a></li>
</ul>
</div>
<div class="section" id="ejercicios">
<h2>Ejercicios</h2>
<p>Durante la última clase se aplicaron los conocimientos adquiridos sobre 2
proyectos a modo de ejercicios:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/lambdanext/movile-tron">Movile Tron</a></li>
<li><a class="reference external" href="https://github.com/lambdanext/movile-turtle">Movile Turtle</a></li>
</ul>
</div>
<div class="section" id="por-que-clojure-y-no-python">
<h2>¿Por qué Clojure y no Python?</h2>
<p>Fue una de las preguntas que más sonaban en mi cabeza. <em>map, reduce,
lazy evaluation, lambda functions</em>, por poner ciertos ejemplos, fueron
presentados como piezas fundamentales de Clojure y se encuentran en el
repertorio de instrucciones nativas de Python. Entonces: ¿por qué no Python?</p>
<p>La respuesta corta es: <strong>manejo de memoria</strong>. Clojure es un lenguaje que corre
sobre la JVM y Python mantiene su limitación de 1 thread por procesador a
través de <a class="reference external" href="https://wiki.python.org/moin/GlobalInterpreterLock">GIL</a>.</p>
<p>Para más detalles sobre comparativas de estos lenguajes se puede consultar
<a class="reference external" href="http://benchmarksgame.alioth.debian.org/u64q/compare.php?lang=clojure&amp;lang2=python3#faster-programs-measurements">estas tablas</a>.</p>
<p>Pero dejo la pregunta en el aire para más adelante: <strong>¿Por qué no Jython?</strong>.</p>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="i-choose-you/" class="u-url">Te elijo</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Ariel Gerardo Ríos</span></p>
            <p class="dateline"><a href="i-choose-you/" rel="bookmark"><time class="published dt-published" datetime="2015-09-11T01:20:52-03:00" title="2015-09-11 01:20">2015-09-11 01:20</time></a></p>
                <p class="commentline">
        
    <a href="i-choose-you/#disqus_thread" data-disqus-identifier="cache/posts/i-choose-you.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<blockquote>
<p>Porque sos la verdad más sincera que encontré en el mundo estoy hoy acá. Por
hacerme sentir que estoy completo al fin y demostrarme que el amor está en todo
y cada cosa que hacemos juntos.</p>
<p>Sole: quiero que sigamos construyendo juntos un hogar y ser tan felices como
podamos. ¿Aceptás?</p>
</blockquote>
<p>Mis votos, para <strong>Telma Soledad Euler</strong>.</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="random/" class="u-url">Random writting I</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Ariel Gerardo Ríos</span></p>
            <p class="dateline"><a href="random/" rel="bookmark"><time class="published dt-published" datetime="2015-06-19T01:09:51-03:00" title="2015-06-19 01:09">2015-06-19 01:09</time></a></p>
                <p class="commentline">
        
    <a href="random/#disqus_thread" data-disqus-identifier="cache/posts/random.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <pre class="code text"><a name="rest_code_4259041859de463a8ee4586802521dbe-1"></a>Lo intenté muchas veces, seguirte el paso.
<a name="rest_code_4259041859de463a8ee4586802521dbe-2"></a>No quererte más. De verdad que lo intenté.
<a name="rest_code_4259041859de463a8ee4586802521dbe-3"></a>Me fui de mí y del lugar que compartimos. Ya no quise estar ahí, pero estaba.
<a name="rest_code_4259041859de463a8ee4586802521dbe-4"></a>
<a name="rest_code_4259041859de463a8ee4586802521dbe-5"></a>No me quedé porque quise.
<a name="rest_code_4259041859de463a8ee4586802521dbe-6"></a>No me quedé por vos.
<a name="rest_code_4259041859de463a8ee4586802521dbe-7"></a>Estás acá para llenar un vacío que vos no creaste.
<a name="rest_code_4259041859de463a8ee4586802521dbe-8"></a>
<a name="rest_code_4259041859de463a8ee4586802521dbe-9"></a>Sentí tus ojos clavados en mi espalda atravesarme tan fácil como el aire que
<a name="rest_code_4259041859de463a8ee4586802521dbe-10"></a>nos rodea. Ya no tengo nada más para darte; te lo di todo y no necesito nada a
<a name="rest_code_4259041859de463a8ee4586802521dbe-11"></a>cambio. Nada más me retiene acá.
</pre>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="learning-to-teach-docker/" class="u-url">Aprendiendo a enseñar I: Docker</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Ariel Gerardo Ríos</span></p>
            <p class="dateline"><a href="learning-to-teach-docker/" rel="bookmark"><time class="published dt-published" datetime="2015-04-20T22:33:23-03:00" title="2015-04-20 22:33">2015-04-20 22:33</time></a></p>
                <p class="commentline">
        
    <a href="learning-to-teach-docker/#disqus_thread" data-disqus-identifier="cache/posts/learning-to-teach-docker.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<div class="figure align-right">
<a class="reference external image-reference" href="http://ariel17.github.io/docker-talk/"><img alt="/galleries/learning-to-teach-i-docker/slides.png" src="../galleries/learning-to-teach-i-docker/slides.png" style="width: 400.0px;"></a>
</div>
<p>En <a class="reference external" href="https://www.movile.com/en/">Movile</a> (sí, <a class="reference external" href="https://www.youtube.com/watch?v=PirVtiJuvDs"><em>volví</em></a>) se inició un programa de auto-capacitaciones, donde
las clases fueron programadas mediante técnica <a class="reference external" href="http://www.proyectosagiles.org/que-es-open-space">Open Space</a>. Uno de los temas
que yo propuse para aprender fue <a class="reference external" href="https://www.docker.com/">Docker</a> ya que nunca había trabajado con estas
herramientas.</p>
<p>La cuestión es que era mi tarea encontrar los medios de que alguien
nos enseñara dicha tecnología... pero mi orgullo y yo no nunca pretendimos que
esa persona no fuera otra que yo mismo, así que me puse en campaña de aprender
<a class="reference external" href="https://www.docker.com/">Docker</a> el pasado fin de semana. El resultado fueron <a class="reference external" href="http://ariel17.github.io/docker-talk/"><strong>estos slides</strong></a> (hechos
con <a class="reference external" href="http://sphinx-doc.org/">Sphinx</a> y <a class="reference external" href="https://hieroglyph.readthedocs.org/en/latest/">Hieroglyph</a>) y una charla de aproximadamente 25 minutos :).</p>
<p>Debo mejorar:</p>
<ul class="simple">
<li>Disminuir la velocidad en que abarco los temas: la charla estaba pensada para
durar ~40 minutos y en realidad duró un poco más de la mitad :(</li>
<li>Cambiar el tono de voz para evitar la monotonía.</li>
</ul>
<p>La próxima clase será de <a class="reference external" href="https://www.python.org/">Python</a> :D Estoy un poquito feliz.</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="loneliness/" class="u-url">Soledad</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Ariel Gerardo Ríos</span></p>
            <p class="dateline"><a href="loneliness/" rel="bookmark"><time class="published dt-published" datetime="2015-04-02T16:08:30-03:00" title="2015-04-02 16:08">2015-04-02 16:08</time></a></p>
                <p class="commentline">
        
    <a href="loneliness/#disqus_thread" data-disqus-identifier="cache/posts/loneliness.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<div class="container">
<img alt="Soledad" class="img-responsive align-center" src="../galleries/loneliness/loneliness.jpg">
</div>
<div class="container">
<p>Hubo un momento en mi vida que me sentí así de solo. Fue un sentimiento tan
acogedor como vertiginoso, en una época en que la melancolía era el
estandarte en mis batallas. Tomar las decisiones que cambian tu vida es como
estar en un precipicio, teniendo una conversación con uno mismo.
Contemplando algo hermoso e inmenso, haber saltado fue la mejor elección.</p>
<p>Gracias <a class="reference external" href="http://www.santiagocabezas.com.ar/">Santiago</a> por la imagen.</p>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="letters-to-my-loves-ii/" class="u-url">Cartas para mis amores II</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Ariel Gerardo Ríos</span></p>
            <p class="dateline"><a href="letters-to-my-loves-ii/" rel="bookmark"><time class="published dt-published" datetime="2015-03-12T00:36:26-03:00" title="2015-03-12 00:36">2015-03-12 00:36</time></a></p>
                <p class="commentline">
        
    <a href="letters-to-my-loves-ii/#disqus_thread" data-disqus-identifier="cache/posts/letters-to-my-loves-ii.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<ul class="simple">
<li>Fecha: 1357 DC, día 14 del mes de Werel, 14h 16m.</li>
</ul>
<p>Hoy desperté con <em>el miedo durmiendo de mi lado</em>, como dice mi padre: es el
sentimiento que descubre el nefasto hecho de que luego de nosotros no habrá
más vida. No hay más nada allá de nosotros, nadie que visite nuestras tumbas,
ninguna otra civilización que nos alcance. <em>"Qué tragedia pensar en la Muerte
con sólo 13 años"</em> fue lo primero que vino a mi mente, pero no hay muchas otras
cosas en qué pensar. La luz azul de este mundo nos volvió locos y poderosos
pero, como siempre, tuvimos el poder en nuestras manos sólo el tiempo
suficiente para destruirnos y no para arreglar las cosas.</p>
<p>Necesito escribir.</p>
<hr class="docutils">
<pre class="literal-block">
* Contenido: Transcripción de audio.

* Fecha: 1357 DC, día 17 del mes de Haini, 27h 35m.

* Descripción de la situación: Estoy sentado con mi abuelo en la puerta de su
  casa: él en su silla de madera de yeora (árbol nativo de este continente),
  yo estoy en el suelo con las piernas cruzadas. Mira hacia el bosque nuevo
  que rodea su hogar pero sus ojos parecen tener la mirada perdida, como si
  mirara algo que no está ahí... Él vivió -y sobrevivió- tanto a la Primera
  como la Segunda Destrucción.

----- INICIO DE LA GRABACIÓN -----

Hechizos y brujas... simples mortales cegados por poderes dentro de su mente
que no entienden. Mezclar el latido del corazón de un adolescente de nuestra
familia con los hechizos que han rondado en este mundo desde antes que
llegáramos sólo nos han abierto heridas viejas, las mismas heridas por las
que nos fuimos de ese odioso planeta. Sí, de ese, el que ya no existe; ¡ya ni
su nombre sobrevivió! Y por algún buen motivo habrá sido.

Desde que fui la primera vez a aquel páramo, algo quedó estático en mí. Aún
tengo 17 años y estoy corriendo. Solté la mano de mi cuerpo y seguimos
caminos separados, pero viéndonos a la distancia: en esa distancia profunda
del espejo por la mañana, luego de habernos encontrado en los campos de los
sueños durante la noche. Nos seguimos buscando ahí, porque es en la oscuridad
donde tenemos algo en común.

Pero eso es ahora, al final. Al principio, hubo un desierto.

Hubo hace mucho tiempo un desierto, una tierra lejana, un lugar oscuro. Era
tan patente como real un espejismo, como sentir las caricias dadas en los
recuerdos. Tan difícil de llegar como de abandonarlo. Fue simplemente verlo
una vez para sentir que fue mi hogar en el pasado y lo sería en el futuro.
Fue sentirlo un instante para haberme maldecido con melancolía y una
pesadumbrez en la mirada que marcaría cada paso que diera, en la dirección
que sea, dejando a su vez la marca de su látigo como la pluma que firma con
mi nombre y sangre.

Imposible de ver dónde termina, dónde empieza; todo te congela, pero te
tranquiliza, como un hechizo. Hay una luz azul y tenue a la distancia, una
estrella que se apaga ahogada entre la bruma gris. Blanco tanto el cielo como
el suelo, veo que el camino ha sido marcado por las pisadas de otros que han
estado aquí igual que yo hace siglos pero sin saber si lograron salir... U
olvidar.

Llegué ahí la noche misma de la Primera Destrucción.
</pre>
<p><strong>Continuará.</strong></p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="im-grown/" class="u-url">Ya soy grande</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Ariel Gerardo Ríos</span></p>
            <p class="dateline"><a href="im-grown/" rel="bookmark"><time class="published dt-published" datetime="2015-01-27T09:02:16-03:00" title="2015-01-27 09:02">2015-01-27 09:02</time></a></p>
                <p class="commentline">
        
    <a href="im-grown/#disqus_thread" data-disqus-identifier="cache/posts/im-grown.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<p>El pasado te atormenta. Te llama. Te ve de lejos y vos lo ves a él. Tu futuro y
tu pasado se encuentran en ese presente raro, algo rancio. Todo es ligeramente
igual a antes, sólo que más viejo, con algunas canas pero los mismos ojos. Pero
nunca la misma sombra.</p>
<p>Camino rápido porque -por lo que se- quiero escaparme de él. El camino se
convierte en una escalada muy empinada donde todo lo que fui y sentí hace
fuerza para abajo. No es tan fácil tener paz con uno mismo cuando el recuerdo
está vivo, caminando por ahí, mirándote cuando mirás a un costado, porque nada
muere dentro de mi piel. Vivo una vida que se divide en muchas y vivo cada una
intensamente. Nada se detiene dentro de mi corazón.</p>
<p>Los nervios pasan, la tranquilidad vuelve. Qué lata... de alguna forma me apena
saber que ya soy un adulto que aún siente como un chico; pero no siento culpa.
Encontré muchas formas de amar a lo largo de este camino y estoy agradecido, lo
malo es que no hay forma de apagar el fuego que dejo al caminar.</p>
<p>El tren de mis pensamientos se detiene siempre con un "Gracias" y sin rencor en
las manos. ¿Eso es quizás darse cuenta que crecí?</p>
<p>Mami, papi: ya soy grande.</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="refreshing-tokens-on-django-for-google-oauth2-the-hard-way/" class="u-url">Renovando tokens en Django para Google Oauth2, de la manera difícil</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Ariel Gerardo Ríos</span></p>
            <p class="dateline"><a href="refreshing-tokens-on-django-for-google-oauth2-the-hard-way/" rel="bookmark"><time class="published dt-published" datetime="2014-10-30T10:00:16-03:00" title="2014-10-30 10:00">2014-10-30 10:00</time></a></p>
                <p class="commentline">
        
    <a href="refreshing-tokens-on-django-for-google-oauth2-the-hard-way/#disqus_thread" data-disqus-identifier="cache/posts/refreshing-tokens-on-django-for-google-oauth2-the-hard-way.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<p>Cuando digo <em>de la manera difícil</em> quiero decir que fue MUY difícil <em>para mí</em>
encontrar la combinación correcta de configuraciones para tener funcionando
<a class="reference external" href="https://www.djangoproject.com/">Django</a> combinado con <a class="reference external" href="http://psa.matiasaguirre.net/">python-social-auth</a> y <a class="reference external" href="https://developers.google.com/api-client-library/python/">google-api-python-client</a>. El
escenario era tan simple y sin embargo tan complicado de hacerlo funcionar como
debía, que estoy un poco frustrado.</p>
<div class="section" id="el-escenario">
<h2>El escenario</h2>
<p>Sincronizar un evento propio del usuario hacia su cuenta de Google Calendar, no
en ambas direcciones sino sólo <code>Django -&gt; GCalendar</code>. El usuario debe
autenticar la cuenta para usar la sincronización sólo una vez, pero los tokens
de <a class="reference external" href="https://developers.google.com/accounts/docs/OAuth2">Google Oauth2</a> tienen 1 hora de tiempo de vida, así que tienen que ser
renovados o solicitarle al usuario que autorice la aplicación nuevamente.
Ningún dato del usuario se debe actualizar.</p>
</div>
<div class="section" id="el-ambiente-django">
<h2>El ambiente Django</h2>
<p>Google ya cuenta con la biblioteca <a class="reference external" href="https://developers.google.com/api-client-library/python/">google-api-python-client</a> para facilitar la
implementación de los flujos de autenticación pero yo quise usar una biblioteca
que tiene una manera más elegante de hacerlo: <a class="reference external" href="http://psa.matiasaguirre.net/">python-social-auth</a>. Este úlltimo
también permite hacer uso de <a class="reference external" href="http://psa.matiasaguirre.net/docs/backends/index.html#social-backends">muchos otros backends</a> muy fácilmente, no sólo
Google y <a class="reference external" href="http://psa.matiasaguirre.net/docs/backends/index.html#non-social-backends">no sólo sociales</a>. Así que esto es lo que tengo:</p>
<pre class="code text"><a name="rest_code_94fc4d2d70e740a98c0f09db94f8209a-1"></a># Requerimientos
<a name="rest_code_94fc4d2d70e740a98c0f09db94f8209a-2"></a>Django==1.7
<a name="rest_code_94fc4d2d70e740a98c0f09db94f8209a-3"></a>python-social-auth==0.2.1
<a name="rest_code_94fc4d2d70e740a98c0f09db94f8209a-4"></a>google-api-python-client==1.2
<a name="rest_code_94fc4d2d70e740a98c0f09db94f8209a-5"></a>raven==5.0.0  # *realmente* deberia tener Sentry! https://getsentry.com/
<a name="rest_code_94fc4d2d70e740a98c0f09db94f8209a-6"></a>requests==2.3.0
</pre>
<p>Y las configuraciones relacionadas en <code>settings.py</code>:</p>
<pre class="code python"><a name="rest_code_85c6cd7c5e724a41ad33ad5ef4d549fd-1"></a><span class="c"># project/settings.py</span>
<a name="rest_code_85c6cd7c5e724a41ad33ad5ef4d549fd-2"></a>
<a name="rest_code_85c6cd7c5e724a41ad33ad5ef4d549fd-3"></a><span class="n">AUTHENTICATION_BACKENDS</span> <span class="o">=</span> <span class="p">(</span>
<a name="rest_code_85c6cd7c5e724a41ad33ad5ef4d549fd-4"></a>    <span class="s">'social.backends.google.GoogleOAuth2'</span><span class="p">,</span>
<a name="rest_code_85c6cd7c5e724a41ad33ad5ef4d549fd-5"></a>    <span class="s">'django.contrib.auth.backends.ModelBackend'</span><span class="p">,</span>
<a name="rest_code_85c6cd7c5e724a41ad33ad5ef4d549fd-6"></a><span class="p">)</span>
<a name="rest_code_85c6cd7c5e724a41ad33ad5ef4d549fd-7"></a>
<a name="rest_code_85c6cd7c5e724a41ad33ad5ef4d549fd-8"></a><span class="n">SOCIAL_AUTH_LOGIN_REDIRECT_URL</span> <span class="o">=</span> <span class="s">'/home/'</span>
<a name="rest_code_85c6cd7c5e724a41ad33ad5ef4d549fd-9"></a>
<a name="rest_code_85c6cd7c5e724a41ad33ad5ef4d549fd-10"></a><span class="n">SOCIAL_AUTH_LOGIN_ERROR_URL</span> <span class="o">=</span> <span class="n">SOCIAL_AUTH_LOGIN_REDIRECT_URL</span>
<a name="rest_code_85c6cd7c5e724a41ad33ad5ef4d549fd-11"></a>
<a name="rest_code_85c6cd7c5e724a41ad33ad5ef4d549fd-12"></a><span class="n">SOCIAL_AUTH_DISCONNECT_REDIRECT_URL</span> <span class="o">=</span> <span class="n">SOCIAL_AUTH_LOGIN_REDIRECT_URL</span>
<a name="rest_code_85c6cd7c5e724a41ad33ad5ef4d549fd-13"></a>
<a name="rest_code_85c6cd7c5e724a41ad33ad5ef4d549fd-14"></a><span class="n">SOCIAL_AUTH_GOOGLE_OAUTH2_SCOPE</span> <span class="o">=</span> <span class="p">[</span>
<a name="rest_code_85c6cd7c5e724a41ad33ad5ef4d549fd-15"></a>    <span class="s">'https://www.googleapis.com/auth/calendar'</span><span class="p">,</span>
<a name="rest_code_85c6cd7c5e724a41ad33ad5ef4d549fd-16"></a><span class="p">]</span>
<a name="rest_code_85c6cd7c5e724a41ad33ad5ef4d549fd-17"></a>
<a name="rest_code_85c6cd7c5e724a41ad33ad5ef4d549fd-18"></a><span class="n">SOCIAL_AUTH_GOOGLE_OAUTH2_AUTH_EXTRA_ARGUMENTS</span> <span class="o">=</span> <span class="p">{</span>
<a name="rest_code_85c6cd7c5e724a41ad33ad5ef4d549fd-19"></a>    <span class="s">'access_type'</span><span class="p">:</span> <span class="s">'offline'</span><span class="p">,</span>  <span class="c"># Activa el permiso de renovación</span>
<a name="rest_code_85c6cd7c5e724a41ad33ad5ef4d549fd-20"></a>    <span class="s">'approval_promt'</span><span class="p">:</span> <span class="s">'force'</span>  <span class="c"># Activa refresh_token</span>
<a name="rest_code_85c6cd7c5e724a41ad33ad5ef4d549fd-21"></a><span class="p">}</span>
<a name="rest_code_85c6cd7c5e724a41ad33ad5ef4d549fd-22"></a>
<a name="rest_code_85c6cd7c5e724a41ad33ad5ef4d549fd-23"></a><span class="n">SOCIAL_AUTH_PIPELINE</span> <span class="o">=</span> <span class="p">(</span>  <span class="c"># Quitado creación de usuario y actualización del perfil</span>
<a name="rest_code_85c6cd7c5e724a41ad33ad5ef4d549fd-24"></a>    <span class="s">'social.pipeline.social_auth.social_details'</span><span class="p">,</span>
<a name="rest_code_85c6cd7c5e724a41ad33ad5ef4d549fd-25"></a>    <span class="s">'social.pipeline.social_auth.social_uid'</span><span class="p">,</span>
<a name="rest_code_85c6cd7c5e724a41ad33ad5ef4d549fd-26"></a>    <span class="s">'social.pipeline.social_auth.auth_allowed'</span><span class="p">,</span>
<a name="rest_code_85c6cd7c5e724a41ad33ad5ef4d549fd-27"></a>    <span class="s">'social.pipeline.social_auth.associate_user'</span><span class="p">,</span>
<a name="rest_code_85c6cd7c5e724a41ad33ad5ef4d549fd-28"></a>    <span class="s">'social.pipeline.social_auth.load_extra_data'</span><span class="p">,</span>
<a name="rest_code_85c6cd7c5e724a41ad33ad5ef4d549fd-29"></a><span class="p">)</span>
</pre>
<p>Lo que hace toda la magia es el argumento extra <code>approval_promt</code> porque
Google sólo envía el <code>refresh_token</code> cuando está presente. No importa el
hecho de que uno ya indicó el tipo de acceso offline: cuando el momento de la
renovación llegue uno sólo puede hacerlo usando ese valor, ningún otro es
válido. <strong>Por favor, refútenme.</strong></p>
</div>
<div class="section" id="sincronizando-y-renovando">
<h2>Sincronizando y renovando</h2>
<p>Un modelo que representa un evento de usario con sincronización + renovación
del token cuando sucede un error de autenticación:</p>
<pre class="code python"><a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-1"></a><span class="c">#!/usr/bin/env python</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-2"></a><span class="c"># -*- coding: utf-8 -*-</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-3"></a>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-4"></a><span class="sd">"""</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-5"></a><span class="sd">Model definition for appliation ``app``.</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-6"></a><span class="sd">"""</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-7"></a>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-8"></a><span class="kn">import</span> <span class="nn">logging</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-9"></a>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-10"></a><span class="kn">from</span> <span class="nn">apiclient.discovery</span> <span class="kn">import</span> <span class="n">build</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-11"></a><span class="kn">from</span> <span class="nn">oauth2client.client</span> <span class="kn">import</span> <span class="n">AccessTokenCredentials</span><span class="p">,</span> <span class="n">AccessTokenCredentialsError</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-12"></a><span class="kn">from</span> <span class="nn">requests.exceptions</span> <span class="kn">import</span> <span class="n">HTTPError</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-13"></a><span class="kn">import</span> <span class="nn">httplib2</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-14"></a>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-15"></a><span class="kn">from</span> <span class="nn">django.contrib.auth.models</span> <span class="kn">import</span> <span class="n">User</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-16"></a><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-17"></a>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-18"></a><span class="kn">from</span> <span class="nn">social.apps.django_app.default.models</span> <span class="kn">import</span> <span class="n">UserSocialAuth</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-19"></a><span class="kn">from</span> <span class="nn">social.apps.django_app.utils</span> <span class="kn">import</span> <span class="n">load_strategy</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-20"></a>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-21"></a><span class="kn">from</span> <span class="nn">app.models</span> <span class="kn">import</span> <span class="n">Event</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-22"></a>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-23"></a>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-24"></a><span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-25"></a>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-26"></a>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-27"></a><span class="k">class</span> <span class="nc">CustomEvent</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-28"></a>    <span class="sd">"""</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-29"></a><span class="sd">    A very simple custom event model.</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-30"></a><span class="sd">    """</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-31"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-32"></a>    <span class="n">description</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-33"></a>    <span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">User</span><span class="p">)</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-34"></a>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-35"></a>    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-36"></a>        <span class="k">return</span> <span class="s">u"{0} ({1})"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-37"></a>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-38"></a>    <span class="k">def</span> <span class="nf">get_google_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-39"></a>        <span class="sd">"""</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-40"></a><span class="sd">        Implementing the Calendar API content required to create an event:</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-41"></a><span class="sd">        https://developers.google.com/google-apps/calendar/v3/reference/events?hl=es#resource</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-42"></a><span class="sd">        """</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-43"></a>        <span class="k">return</span> <span class="p">{}</span>  <span class="c"># dummy of course</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-44"></a>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-45"></a>    <span class="k">def</span> <span class="nf">sync_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">retry</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-46"></a>        <span class="sd">"""</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-47"></a><span class="sd">        Pushes current event to the user's Google Calendar service, if it is enabled.</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-48"></a>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-49"></a><span class="sd">        :param retry: Indicates if it should retry on an authentication error.</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-50"></a><span class="sd">        :type retry: ``bool``</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-51"></a><span class="sd">        :return: Synchronization result from Google API.</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-52"></a><span class="sd">        :rtype: ``dict`` or ``None``</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-53"></a><span class="sd">        """</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-54"></a>        <span class="k">try</span><span class="p">:</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-55"></a>            <span class="n">provider</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">social_auth</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s">'google-oauth2'</span><span class="p">)</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-56"></a>        <span class="k">except</span> <span class="n">UserSocialAuth</span><span class="o">.</span><span class="n">DoesNotExist</span><span class="p">:</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-57"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s">u"Google is not authenticated; nothing to do :("</span><span class="p">)</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-58"></a>            <span class="k">return</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-59"></a>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-60"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s">u'Syncronizing event </span><span class="si">%r</span><span class="s"> into Google Calendar for user </span><span class="si">%r</span><span class="s">'</span><span class="p">,</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-61"></a>                     <span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-62"></a>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-63"></a>        <span class="n">credentials</span> <span class="o">=</span> <span class="n">AccessTokenCredentials</span><span class="p">(</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-64"></a>            <span class="n">provider</span><span class="o">.</span><span class="n">extra_data</span><span class="p">[</span><span class="s">'access_token'</span><span class="p">],</span> <span class="s">'my-user-agent/1.0'</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-65"></a>        <span class="p">)</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-66"></a>        <span class="n">http</span> <span class="o">=</span> <span class="n">httplib2</span><span class="o">.</span><span class="n">Http</span><span class="p">()</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-67"></a>        <span class="n">http</span> <span class="o">=</span> <span class="n">credentials</span><span class="o">.</span><span class="n">authorize</span><span class="p">(</span><span class="n">http</span><span class="p">)</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-68"></a>        <span class="n">service</span> <span class="o">=</span> <span class="n">build</span><span class="p">(</span><span class="n">serviceName</span><span class="o">=</span><span class="s">'calendar'</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s">'v3'</span><span class="p">,</span> <span class="n">http</span><span class="o">=</span><span class="n">http</span><span class="p">)</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-69"></a>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-70"></a>        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_google_data</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-71"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s">u'Creating event with data: </span><span class="si">%r</span><span class="s">'</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-72"></a>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-73"></a>        <span class="k">try</span><span class="p">:</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-74"></a>            <span class="n">result</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">events</span><span class="p">()</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-75"></a>                <span class="n">calendarId</span><span class="o">=</span><span class="s">'primary'</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">data</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-76"></a>            <span class="p">)</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-77"></a>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-78"></a>        <span class="k">except</span> <span class="n">AccessTokenCredentialsError</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-79"></a>            <span class="n">result</span> <span class="o">=</span> <span class="bp">None</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-80"></a>            <span class="k">try</span><span class="p">:</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-81"></a>                <span class="n">provider</span><span class="o">.</span><span class="n">refresh_token</span><span class="p">(</span><span class="n">load_strategy</span><span class="p">())</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-82"></a>            <span class="k">except</span> <span class="n">HTTPError</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-83"></a>                <span class="n">provider</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-84"></a>                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-85"></a>                    <span class="s">u"Error trying to refesh token. Authorization object "</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-86"></a>                    <span class="s">"was removed."</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="p">{</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-87"></a>                        <span class="s">u'response'</span><span class="p">:</span> <span class="p">{</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-88"></a>                            <span class="s">u'body'</span><span class="p">:</span> <span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">,</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-89"></a>                            <span class="s">u'url'</span><span class="p">:</span> <span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">url</span><span class="p">,</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-90"></a>                            <span class="s">u'status_code'</span><span class="p">:</span> <span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-91"></a>                        <span class="p">},</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-92"></a>                        <span class="s">u'request'</span><span class="p">:</span> <span class="p">{</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-93"></a>                            <span class="s">u'url'</span><span class="p">:</span> <span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">url</span><span class="p">,</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-94"></a>                            <span class="s">u'method'</span><span class="p">:</span> <span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="p">,</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-95"></a>                            <span class="s">u'body'</span><span class="p">:</span> <span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">,</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-96"></a>                        <span class="p">},</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-97"></a>                    <span class="p">})</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-98"></a>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-99"></a>        <span class="k">except</span> <span class="ne">Exception</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-100"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-101"></a>                <span class="s">u'[sync_event] Unexpected exception synchronizing event'</span><span class="p">,</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-102"></a>                <span class="n">exc_info</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="p">{</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-103"></a>                    <span class="s">u'user'</span><span class="p">:</span> <span class="p">{</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-104"></a>                        <span class="s">u'pk'</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">pk</span><span class="p">,</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-105"></a>                        <span class="s">u'email'</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">email</span><span class="p">,</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-106"></a>                    <span class="p">},</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-107"></a>                    <span class="s">u'provider'</span><span class="p">:</span> <span class="p">{</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-108"></a>                        <span class="s">u'pk'</span><span class="p">:</span> <span class="n">provider</span><span class="o">.</span><span class="n">pk</span><span class="p">,</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-109"></a>                        <span class="s">u'extra_data'</span><span class="p">:</span> <span class="n">provider</span><span class="o">.</span><span class="n">extra_data</span><span class="p">,</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-110"></a>                    <span class="p">},</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-111"></a>                    <span class="s">u'event'</span><span class="p">:</span> <span class="p">{</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-112"></a>                        <span class="s">u'pk'</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">pk</span><span class="p">,</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-113"></a>                        <span class="s">u'name'</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-114"></a>                    <span class="p">},</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-115"></a>                <span class="p">})</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-116"></a>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-117"></a>        <span class="k">if</span> <span class="n">retry</span><span class="p">:</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-118"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">sync_event</span><span class="p">(</span><span class="n">retry</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-119"></a>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-120"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s">u'Event creation result: </span><span class="si">%r</span><span class="s">'</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
<a name="rest_code_ba7d79a7f104439f800901bcb66a8ed6-121"></a>        <span class="k">return</span> <span class="n">result</span>
</pre>
<p>¡Buen fin de semana! :)</p>
<p><strong>ACTUALIZACIÓN del 2014-11-11:</strong> <a class="reference external" href="http://psa.matiasaguirre.net/">python-social-auth</a> ha actualizado la
documentación acerca de cómo renovar tokens: <a class="reference external" href="http://psa.matiasaguirre.net/docs/use_cases.html#re-prompt-google-oauth2-users-to-refresh-the-refresh-token">http://psa.matiasaguirre.net/docs/use_cases.html#re-prompt-google-oauth2-users-to-refresh-the-refresh-token</a></p>
<p>Hoy encontré que los refresh_tokens también expiran, así que el valor correcto
de <tt class="docutils literal">approval_promt</tt> a usar es <tt class="docutils literal">auto</tt>:</p>
<pre class="code python"><a name="rest_code_ee2a140da5d94c4da01417d403528705-1"></a><span class="n">SOCIAL_AUTH_GOOGLE_OAUTH2_AUTH_EXTRA_ARGUMENTS</span> <span class="o">=</span> <span class="p">{</span>
<a name="rest_code_ee2a140da5d94c4da01417d403528705-2"></a>    <span class="s">'access_type'</span><span class="p">:</span> <span class="s">'offline'</span><span class="p">,</span> <span class="c"># Activa el permiso de renovación</span>
<a name="rest_code_ee2a140da5d94c4da01417d403528705-3"></a>    <span class="s">'approval_promt'</span><span class="p">:</span> <span class="s">'auto'</span>  <span class="c"># Activa refresh_token, por siempre y para siempre</span>
<a name="rest_code_ee2a140da5d94c4da01417d403528705-4"></a><span class="p">}</span>
</pre>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="week-2014-43-summary/" class="u-url">Semana 2014#43 - Resumen</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Ariel Gerardo Ríos</span></p>
            <p class="dateline"><a href="week-2014-43-summary/" rel="bookmark"><time class="published dt-published" datetime="2014-10-27T10:38:00-03:00" title="2014-10-27 10:38">2014-10-27 10:38</time></a></p>
                <p class="commentline">
        
    <a href="week-2014-43-summary/#disqus_thread" data-disqus-identifier="cache/posts/week-43-summary.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<p>El resumen para la semana #43: muy movida pero concentrada en sus actividades.</p>
<div class="section" id="libros-que-estoy-leyendo-lei">
<h2>Libros que estoy leyendo/leí</h2>
<ul class="simple">
<li>
<a class="reference external" href="http://es.wikipedia.org/wiki/El_mundo_de_Rocannon"><em>El Mundo de Rocannon</em></a> de <a class="reference external" href="http://es.wikipedia.org/wiki/Ursula_K._Le_Guin">Úrsula K. Le Guin</a>
</li>
<li>
<a class="reference external" href="http://en.wikipedia.org/wiki/The_Pragmatic_Programmer"><em>The Pragmatic Programmer: From Journeyman to Master</em></a> de <a class="reference external" href="http://en.wikipedia.org/wiki/Andy_Hunt_(author)">Andrew Hunt</a> y <a class="reference external" href="http://en.wikipedia.org/wiki/Dave_Thomas_(programmer)">David Thomas</a>
</li>
<li>
<a class="reference external" href="http://bitfieldconsulting.com/puppet-beginners-guide"><em>Puppet 3 Begginer's Guide</em></a> de <a class="reference external" href="http://bitfieldconsulting.com/about">John Arundel</a>
</li>
</ul>
</div>
<div class="section" id="tecnologia-que-aprendi-use">
<h2>Tecnología que aprendí/usé</h2>
<ul class="simple">
<li>
<a class="reference external" href="http://npyscreen.readthedocs.org/introduction.html">npyscreen</a>: Una biblioteca de widgets y framework de aplicaciones para
programar aplicaciones para terminales o consola.</li>
<li>
<a class="reference external" href="http://builtoncement.org/">cement</a>: Un framework de aplicaciones CLI para Python.</li>
<li>
<a class="reference external" href="http://ponyorm.com/">PonyORM</a>: Un ORM para Python que utiliza el mismo lenguaje para realizar
las consultas.</li>
<li>
<a class="reference external" href="http://puppetlabs.com/">Puppet</a>: Un utilitario para la administración de la configuración. Lo estoy
usando con Vagrant para provisionar los requerimientos de la máquina virtual
y pronto lo usaré para mis servidores de producción :)</li>
</ul>
</div>
<div class="section" id="proyectos-personales-que-empece-estoy-haciendo">
<h2>Proyectos personales que empecé/estoy haciendo</h2>
<ul class="simple">
<li>
<a class="reference external" href="https://gitlab.ariel17.com.ar/arynan/base-django">Proyecto de ejemplo</a> para provisionar Vagrant usando Puppet.</li>
<li>Mantenimiento de la huerta: ¡se vienen nuevos tomates!</li>
</ul>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="week-2014-42-summary/" class="u-url">Semana 2014#42 - Resumen</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Ariel Gerardo Ríos</span></p>
            <p class="dateline"><a href="week-2014-42-summary/" rel="bookmark"><time class="published dt-published" datetime="2014-10-17T09:45:07-03:00" title="2014-10-17 09:45">2014-10-17 09:45</time></a></p>
                <p class="commentline">
        
    <a href="week-2014-42-summary/#disqus_thread" data-disqus-identifier="cache/posts/week-42-summary.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<p>Durante la semana estuve pensando la manera de llevar un registro de mis
actividades. Lo más sencillo que se me ocurrió fue hacer un resumen cerca del
fin de semana: es un período de tiempo corto para no olvidar la mayoría de los
sucesos pero suficientemente largo para que sucedan cosas interesantes (aunque
ésto último tendré que provármelo a mí mismo :P).</p>
<div class="section" id="libros-que-estoy-leyendo-lei">
<h2>Libros que estoy leyendo/leí</h2>
<ul class="simple">
<li>
<a class="reference external" href="http://es.wikipedia.org/wiki/El_mundo_de_Rocannon"><em>El Mundo de Rocannon</em></a> de <a class="reference external" href="http://es.wikipedia.org/wiki/Ursula_K._Le_Guin">Úrsula K. Le Guin</a>
</li>
<li>
<a class="reference external" href="http://en.wikipedia.org/wiki/The_Pragmatic_Programmer"><em>The Pragmatic Programmer: From Journeyman to Master</em></a> de <a class="reference external" href="http://en.wikipedia.org/wiki/Andy_Hunt_(author)">Andrew Hunt</a> y <a class="reference external" href="http://en.wikipedia.org/wiki/Dave_Thomas_(programmer)">David Thomas</a>
</li>
<li><a class="reference external" href="https://leanpub.com/l4">Laravel 4 Official Documentation</a></li>
</ul>
</div>
<div class="section" id="tecnologias-que-aprendi-use">
<h2>Tecnologías que aprendí/usé</h2>
<ul class="simple">
<li>
<a class="reference external" href="http://psa.matiasaguirre.net/">Python Social Auth</a>: Administración de autenticación OAuth2 en Google (y
otras plataformas sociales).</li>
<li>
<a class="reference external" href="https://developers.google.com/accounts/docs/OAuth2?hl=ES">Google OAuth2</a>: Autorización de una aplicación para publicación de eventos
en Google Calendar del cliente.</li>
<li>
<a class="reference external" href="http://django-tastypie.readthedocs.org/en/latest/toc.html">Django Tastypie</a>: Creación de un proyecto de ejemplo para demostrar a muy
alto nivel las capacidades de este framework.</li>
<li>
<a class="reference external" href="https://www.vagrantup.com/">Vagrant</a>: Replicar el servidor de producción para realizar pruebas de
deploy en mi PC sin necesidad de servidores de terceros.</li>
</ul>
</div>
<div class="section" id="proyectos-personales-que-empece-estoy-haciendo">
<h2>Proyectos personales que empecé/estoy haciendo</h2>
<ul class="simple">
<li>
<a class="reference external" href="https://gitlab.ariel17.com.ar/arynan/know-how/tree/master">Know-How</a>: Repositorio de conocimiento unificado.</li>
<li>Oficina propia: Vacié un galpón para destinarlo a oficina (muy largo plazo).
Se ve muy lindo vacío; ¡ahora hay que llenarlo de Ariel!</li>
</ul>
<p>¡Buen fin de semana! :D</p>
</div>
</div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-3.html" rel="prev">Publicaciones posteriores</a>
            </li>
            <li class="next">
                <a href="index-1.html" rel="next">Publicaciones anteriores</a>
            </li>
        </ul></nav><script>var disqus_shortname="ariel17";(function(){var a=document.createElement("script");a.async=true;a.src="//"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script></main><footer id="footer"><p>Contents © 2018         <a href="mailto:ariel.gerardo.rios@gmail.com">Ariel Gerardo Ríos</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         </p>
            
        </footer>
</div>
    
    
    <script src="../assets/js/bootstrap.min.js"></script><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-48346337-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
